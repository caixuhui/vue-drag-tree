webpackJsonp([1],{"01OD":function(t,e){},Ildq:function(t,e){},"N5/V":function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("7+uW"),i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]},s=n("VU/8")({name:"app"},i,!1,function(t){n("01OD")},null,null).exports,o=n("/ocq"),a={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hello"},[n("h1",[t._v(t._s(t.msg))]),t._v(" "),n("h2",[t._v("Essential Links")]),t._v(" "),t._m(0,!1,!1),t._v(" "),n("h2",[t._v("Ecosystem")]),t._v(" "),t._m(1,!1,!1)])},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[n("a",{attrs:{href:"https://vuejs.org",target:"_blank"}},[t._v("Core Docs")])]),t._v(" "),n("li",[n("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank"}},[t._v("Forum")])]),t._v(" "),n("li",[n("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank"}},[t._v("Community Chat")])]),t._v(" "),n("li",[n("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank"}},[t._v("Twitter")])]),t._v(" "),n("br"),t._v(" "),n("li",[n("a",{attrs:{href:"http://vuejs-templates.github.io/webpack/",target:"_blank"}},[t._v("Docs for This Template")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("a",{attrs:{href:"http://router.vuejs.org/",target:"_blank"}},[this._v("vue-router")])]),this._v(" "),e("li",[e("a",{attrs:{href:"http://vuex.vuejs.org/",target:"_blank"}},[this._v("vuex")])]),this._v(" "),e("li",[e("a",{attrs:{href:"http://vue-loader.vuejs.org/",target:"_blank"}},[this._v("vue-loader")])]),this._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank"}},[this._v("awesome-vue")])])])}]},l=n("VU/8")({name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App"}}},a,!1,function(t){n("gu2T")},"data-v-4241e014",null).exports,d=n("woOf"),h=n.n(d),c={jsonSiblings:function(t,e){for(var n=e.children||[],r=[],i=0;i<n.length;i++)n[i]!==t&&r.push(n[i]);return r},jsonIndex:function(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).findIndex(function(e){return e===t})},dragInfo:function(t,e){var n=this.jsonIndex;return{source:t,index:n(t,e.children),siblings:e.children,parent:e,prev:function(){return this.index>0?this.siblings[this.index-1]:null},next:function(){return this.index<this.siblings.length-1?this.siblings[this.index+1]:null},moveTo:function(t,e,r){!function t(e){for(var n=0;n<e.length;n++){var r=e[n];r.placeholder?e.splice(n,1):r.children&&t(r.children)}}(this.parent.children),this.parent=t,this.siblings=e.slice(0);var i=this.siblings.indexOf(this.source);i>-1&&(this.siblings.splice(i,1),n(this.source,this.parent)<r&&r--),this.parent.children.splice(r,0,h()({},this.source,{placeholder:!0})),this.siblings=this.parent.children,this.index=r},apply:function(){this.parent.children.splice(this.index,1,this.source)}}},removePlaceholderProperty:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=0;e<t.length;e++){var n=t[e];n.hidden?delete n.hidden:n.children&&this.removeHiddenProperty(n.children)}},offset:function(t){var e=t.getBoundingClientRect();return{width:t.offsetWidth,height:t.offsetHeight,top:e.top+(window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop),left:e.left+(window.pageXOffset||document.body.scrollLeft||document.documentElement.scrollLeft)}},positionStarted:function(t,e){var n={},r=t.pageX,i=t.pageY;return t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches.length>0&&(r=t.originalEvent.touches[0].pageX,i=t.originalEvent.touches[0].pageY),n.offsetX=r-this.offset(e).left,n.offsetY=i-this.offset(e).top,n.startX=n.lastX=r,n.startY=n.lastY=i,n.nowX=n.nowY=n.distX=n.distY=n.dirAx=0,n.dirX=n.dirY=n.lastDirX=n.lastDirY=n.distAxX=n.distAxY=0,n},positionMoved:function(t,e,n){var r=t.pageX,i=t.pageY,s=void 0;t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches.length>0&&(r=t.originalEvent.touches[0].pageX,i=t.originalEvent.touches[0].pageY);if((Math.abs(r-e.lastX)>10||Math.abs(i-e.lastY)>10)&&(e.lastX=e.nowX,e.lastY=e.nowY),e.nowX=r,e.nowY=i,e.distX=Math.abs(e.nowX-e.lastX)>=10?e.nowX-e.lastX:0,e.distY=Math.abs(e.nowY-e.lastY)>=10?e.nowY-e.lastY:0,e.lastDirX=e.dirX,e.lastDirY=e.dirY,e.dirX=0===e.distX?0:e.distX>0?1:-1,e.dirY=0===e.distY?0:e.distY>0?1:-1,s=Math.abs(e.distX)>Math.abs(e.distY)?1:0,n)return e.dirAx=s,void(e.moving=!0);e.dirAx!==s?(e.distAxX=0,e.distAxY=0):(e.distAxX+=Math.abs(e.distX),0!==e.dirX&&e.dirX!==e.lastDirX&&(e.distAxX=0),e.distAxY+=Math.abs(e.distY),0!==e.dirY&&e.dirY!==e.lastDirY&&(e.distAxY=0)),e.dirAx=s},elementIsTreeNode:function(t){return void 0!==t.attr("drag-tree-node")},elementIsTreeNodeHandle:function(t){return void 0!==t.attr("drag-tree-handle")},elementIsTree:function(t){return void 0!==t.attr("drag-tree")},elementIsTreeNodes:function(t){return void 0!==t.attr("drag-tree-nodes")},elementIsPlaceholder:function(t){return t.hasClass("drag-tree-placeholder")},elementIsDropzone:function(t){return t.hasClass("drag-tree-dropzone")},elementContainsTreeNodeHandler:function(t){return t.querySelectorAll("[drag-tree-handle]").length>=1},elementVueInstance:function(t,e){}},u={name:"DragTreeNode",props:{nodeData:Object},data:function(){return{collapsed:!1,isDragging:!1,lastX:null,lastY:null,dragElm:null,placeElm:null,hiddenPlaceElm:null,pos:null,firstMoving:!0,dragInfo:null}},computed:{hasChildren:function(){return this.nodeData.children&&this.nodeData.children.length>0},parentNodeData:function(){return this.$parent&&this.$parent.$parent?"DragTree"===this.$parent.$parent.$options.name?{name:"",children:this.$parent.$parent.list}:this.$parent.$parent.nodeData:null},isPlaceholder:function(){return this.nodeData.placeholder},rootTreeData:function(){return{name:"",root:!0,children:this.$store.state.dragTreeData||[]}}},methods:{toggle:function(){this.collapsed=!this.collapsed},setPlaceHolderHeight:function(){this.$store.commit("setDragTreeNodeHeight",this.$el.offsetHeight)},getNodeParent:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{notRoot:!1,match:null,isMatch:!1};if(t.root)return n;for(var r=e.children,i=0;i<r.length&&!n.isMatch;i++){var s=r[i];if(s===t){n.match=s;break}if(s.children&&s.children.length>0){var o=!n.notRoot;o&&(n.notRoot=!0);var a=this.getNodeParent(t,s,n);!n.isMatch&&a.match&&(n.match=s,n.isMatch=!0),o&&(n.notRoot=!o)}}return n.notRoot||t!==n.match||(n.match=e,n.isMatch=!0),n},insert:function(t,e){console.log("this.nodeData.children",this.nodeData.children),!this.nodeData.children&&(this.nodeData.children=[]),t||(t={name:"new add",children:[]}),e<0&&(e=this.nodeData.children.length),this.nodeData.children.splice(e,0,t)},remove:function(t){this.$emit("removeNode",this)},bindDragMoveEvent:function(){document.bind("mouseup",this.dragEnd),document.bind("mousemove",this.dragMove)},unbindDragMoveEvent:function(){document.unbind("mouseup",this.dragEnd),document.unbind("mousemove",this.dragMove)},dragStart:function(t){console.log(this),this.isDragging=!0,this.dragInfo=c.dragInfo(this.nodeData,this.parentNodeData),console.log("dragInfo",this.dragInfo);var e=c.jsonIndex(this.nodeData,this.parentNodeData.children);this.parentNodeData.children.splice(e,1,{name:"placeholder",placeholder:!0});var n=this.$el,r=n.cloneNode(!0),i=n.parentNode;this.dragElm=document.createElement(i.tagName).addClass(i.className).addClass("drag-tree-node-drag"),this.dragElm.css("width",n.offsetWidth+"px"),this.dragElm.css("z-index",9999),this.setPlaceHolderHeight(),this.pos=c.positionStarted(t,n),this.dragElm.css({left:t.pageX-this.pos.offsetX+"px",top:t.pageY-this.pos.offsetY+"px"}),this.dragElm.append(r),document.querySelector("body").append(this.dragElm),this.bindDragMoveEvent()},dragMove:function(t){if(!this.isDragging)return!0;var e=t.pageX-this.pos.offsetX,n=t.pageY-this.pos.offsetY;if(this.dragElm.css({left:e+"px",top:n+"px"}),c.positionMoved(t,this.pos,this.firstMoving),this.firstMoving)this.firstMoving=!1;else if(this.pos.dirAx){if(this.pos.distX>0){var r=this.dragInfo.prev();if(r){r.children&&this.dragInfo.moveTo(r,r.children,r.children.length)}}if(this.pos.distX<0){if(!this.dragInfo.next()){var i=this.dragInfo.parent;if(i){var s=this.getNodeParent(i,this.rootTreeData).match;s&&this.dragInfo.moveTo(s,s.children,c.jsonIndex(i,s.children)+1)}}}}else{if(this.pos.distY>0){var o=this.dragInfo.next();if(o)this.dragInfo.moveTo(o,o.children,0);else{var a=this.dragInfo.parent;if(a){var l=this.getNodeParent(a,this.rootTreeData).match;l&&this.dragInfo.moveTo(l,l.children,c.jsonIndex(a,l.children)+1)}}}if(this.pos.distY<0){var d=this.dragInfo.prev();if(d)this.dragInfo.moveTo(d,d.children,d.children.length);else{var h=this.dragInfo.parent;if(h){var u=this.getNodeParent(h,this.rootTreeData).match;u&&this.dragInfo.moveTo(u,u.children,c.jsonIndex(h,u.children))}}}}},dragEnd:function(t){var e=this;this.unbindDragMoveEvent(),this.isDragging=!1,this.dragElm&&(console.log("end"),this.dragInfo.apply(),this.$nextTick(function(){e.dragElm.remove(),e.dragElm=null,e.dragInfo=null}))}},beforeCreate:function(){this.$options.components.DragTreeNodes=m}},p={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"drag-tree-node"},[n("div",{staticClass:"drag-tree-handle",on:{mousedown:function(e){if(e.target!==e.currentTarget)return null;t.dragStart(e)}}},[t.hasChildren?n("i",{class:["clickable",{"el-icon-arrow-right":t.collapsed,"el-icon-arrow-down":!t.collapsed}],on:{click:t.toggle}}):t._e(),t._v("\n    "+t._s(t.nodeData.name)+"\n     "),n("el-button",{staticClass:"right-button",attrs:{type:"danger",size:"mini",icon:"close"},on:{click:t.remove}}),t._v(" "),n("el-button",{staticClass:"right-button",attrs:{type:"primary",size:"mini",icon:"plus"},on:{click:function(e){t.insert()}}})],1),t._v(" "),n("drag-tree-nodes",{ref:"childNodes",attrs:{list:t.nodeData.children,collapsed:t.collapsed}})],1)},staticRenderFns:[]},f=n("VU/8")(u,p,!1,function(t){n("cbZg")},null,null).exports,g={name:"DragTreeNodes",props:{list:Array,collapsed:Boolean},computed:{nodeHeight:function(){return this.$store.state.dragTreeNodeHeight>0?this.$store.state.dragTreeNodeHeight:15}},methods:{depth:function(){var t=this.$parent;return t&&["DragTreeNode","DragTreeNodes"].includes(t.$options.name)?t.depth():0},outOfDepth:function(){return this.depth()<0},consoleNode:function(){},insertNode:function(t,e){var n=this;this.list.splice(e,0,t);for(var r=0;r<this.list.length;r++)this.$set(this.list,r,this.list[r]);console.log("list",this.list),this.$nextTick(function(){console.log("actual children",n.$children)})},removeNode:function(t){for(var e=this.$children.filter(function(t){return"DragTreeNode"===t.$options.name}),n=-1,r=0;r<e.length;r++)if(e[r]===t){n=r;break}n>-1?this.list.splice(n,1):this.$parent.$emit("removeNode",this)},childrenCount:function(){return this.$children?this.$children.length:0}},beforeCreate:function(){this.$options.components.DragTreeNode=f}},v={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ol",{staticClass:"drag-tree-nodes",class:{hidden:t.collapsed},attrs:{"drag-tree-nodes":""}},t._l(t.list,function(e){return e.placeholder||e.hidden?e.placeholder?n("li",{staticClass:"drag-tree-node drag-tree-placeholder",style:{height:t.nodeHeight+"px"}}):t._e():n("drag-tree-node",{key:e.name,attrs:{nodeData:e},on:{removeNode:t.removeNode}})}))},staticRenderFns:[]},m=n("VU/8")(g,v,!1,function(t){n("N5/V")},null,null).exports,T={name:"DragTree",props:{list:Array},data:function(){return{}},watch:{list:function(t){this.storeRootData(t)}},components:{DragTreeNodes:m},methods:{insert:function(t,e){this.list.splice(e,0,t),console.log("after insert ",this.list)},storeRootData:function(t){this.$store.commit("setDragTreeData",t)}},mounted:function(){this.storeRootData(this.list)}},D={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"drag-tree",attrs:{"drag-tree":""}},[e("drag-tree-nodes",{attrs:{list:this.list}})],1)},staticRenderFns:[]},E=["java","js","node","vue"],b={data:function(){return{list:E.map(function(t,e){return{name:t,children:"js"===t?[{name:"angular",children:[{name:"angular 1.0",children:[]}]}]:[]}})}},components:{DragTree:n("VU/8")(T,D,!1,function(t){n("Ye/b")},null,null).exports}},_={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tree-main"},[e("el-row",[e("el-col",{attrs:{span:10}},[e("drag-tree",{attrs:{list:this.list}})],1),this._v(" "),e("el-col",{attrs:{span:10,offset:2}},[e("pre",[this._v(this._s(JSON.stringify(this.list,null,4)))])])],1)],1)},staticRenderFns:[]},N=n("VU/8")(b,_,!1,function(t){n("Ildq")},null,null).exports;r.default.use(o.a);var x=new o.a({routes:[{path:"/",name:"HelloWorld",component:l},{path:"/tree",name:"DragTreeMain",component:N}]}),M=n("zL8q"),Y=n.n(M),H=(n("q8zI"),n("pFYg")),X=n.n(H);window.HTMLElement?(HTMLElement.prototype.append=function(t){return this.appendChild(t),this},HTMLElement.prototype.prepend=function(t){var e=this.children;return 0===e.length?this.appendChild(t):this.insertBefore(t,e[0]),this},HTMLElement.prototype.remove=function(t){return t?this.removeChild(t):this.parentNode.removeChild(this),this},HTMLElement.prototype.replaceWith=function(t){return this.parentNode.insertBefore(t,this),this.parentNode.removeChild(this),t},HTMLElement.prototype.index=function(){for(var t=this.parentNode.children,e=0;e<t.length;e++)if(t[e]===this)return e;return-1},HTMLElement.prototype.siblings=function(t){var e=[],n=this.parentNode,r=!t;if(!n)return e;for(var i=n.children,s=0;s<i.length;s++)i[s]!==this&&(r||i[s].tagName.toLowerCase()===t)&&e.push(i[s]);return e},HTMLElement.prototype.after=function(t){var e=this.parentNode;return e.lastChild===this?e.appendChild(t):e.insertBefore(t,this.nextSibling),this},HTMLElement.prototype.before=function(t){return this.parentNode.insertBefore(t,this),this},HTMLElement.prototype.css=function(){if(arguments.length>0){var t=arguments[0];if("object"===(void 0===t?"undefined":X()(t)))for(var e in t)this.style[e]=t[e];else null!==arguments[1]&&void 0!==arguments[1]&&(this.style[t]=arguments[1])}return this},HTMLElement.prototype.hasClass=function(t){return this.classList.contains(t)},HTMLElement.prototype.addClass=function(t){return this.classList.add(t),this},HTMLElement.prototype.removeClass=function(t){return this.classList.remove(t),this},HTMLElement.prototype.bind=function(t,e){return this.attachEvent?this.attachEvent("on"+t,e):this.addEventListener&&this.addEventListener(t,e),this},HTMLElement.prototype.unbind=function(t,e){return this.attachEvent?this.detachEvent("on"+t,e):this.addEventListener&&this.removeEventListener(t,e),this},HTMLElement.prototype.attr=function(t,e){return 2===arguments.length?this.setAttribute(t,e):1===arguments.length&&this.getAttribute(t),this},HTMLDocument.prototype.bind=HTMLElement.prototype.bind,HTMLDocument.prototype.unbind=HTMLElement.prototype.unbind):console.error("当前浏览器不支持HTMLElement属性");var y=n("NYxO");r.default.use(y.a);var $=new y.a.Store({state:{dragTreeData:null,dragTreeNodeHeight:0},mutations:{setDragTreeNodeHeight:function(t,e){t.dragTreeNodeHeight=e},setDragTreeData:function(t,e){t.dragTreeData=e}}});r.default.use(Y.a),r.default.config.productionTip=!1,new r.default({el:"#app",store:$,router:x,template:"<App/>",components:{App:s}})},"Ye/b":function(t,e){},cbZg:function(t,e){},gu2T:function(t,e){},q8zI:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.e5ef8e37864f262ec120.js.map